<html>
  <head>
  </head>
  <body>

    <table id="characters">
      <thead>
        <tr id="characters_header">
          <th data-key="name">Name</th>
          <th data-key="accountId">Owner</th>
          <th data-key="exp">Exp</th>
          <th data-key="area">Area</th>
          <th data-key="created">Created</th>
          <th data-key="updated">Updated</th>
        </tr>
      </thead>
      </tbody> 
    </table>

    <script>
      let characterFixture = [{"id":1,"accountId":"Tweek","name":"Siobhan Faulkner","exp":10000,"area":"Hlammach Docks","created":"23/11/2017","updated":"29/11/2017"},{"id":2,"accountId":"Aez","name":"Alrunden Peralt","exp":12000,"area":"Dreyen Inn","created":"26/6/2017","updated":"29/11/2017"},{"id":3,"accountId":null,"name":"Arthen Relindar","exp":20000,"area":"Relindar Green","created":null,"updated":null},{"id":4,"accountId":"XxDrizzitxX","name":"Ji'Lin Thri'quen","exp":1050,"area":"Dreyen Inn","created":"29/11/2017","updated":"29/11/2017"}];

      fetch('http://sundred.com:6543/characters')
        .then(response => {
          parseResponse(response).then( characters => {
            fillTable(document.querySelector("#characters"), characters);
          })
        })
        .catch(error => {
          fillTable(document.querySelector("#characters"), characterFixture);
        });

      function fillTable(table, dataList) {
        //that's the row within the thead
        let headerRow = table.tHead.children[0]

        dataList.forEach( data => {
          let row = table.insertRow();
          Array.from(headerRow.children).forEach( column => {
            let cell = row.insertCell();
            let text = document.createTextNode(data[column.dataset.key]);
            cell.appendChild(text);
          });
        })
      }

      function parseResponse(response) {
        if (response.ok) {
          return response.json();
        } else {
          console.error(response.status);
          throw new Error(response);
        }
      }
    </script>

  </body>
</html>