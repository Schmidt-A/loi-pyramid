<html>
  <head>
    <script src="../js/tables.js"></script>
    <script src="../js/xhr.js"></script>
  </head>
  <body>

    <form id="login">
      <label for="user">Username</label> 
      <input type="text" name="user"></input>
      <label for="pw">Password</label>
      <input type="password" name="pw"></input>
      <input type="submit"></input>
    </form>

    <table id="accountInfo">
      <tbody>
        <tr>
          <th data-key="username"></th>
          <th data-key="role"></th>
          <th data-key="approved"></th>
          <th data-key="banned"></th>
          <th data-key="created"></th>
          <th data-key="updated"></th>
        </tr>
      </tbody>
    </table>

    <table id="characters">
      <thead>
        <tr>
          <th data-key="name">Name</th>
          <th data-key="accountId">Owner</th>
          <th data-key="exp">Exp</th>
          <th data-key="area">Area</th>
          <th data-key="created">Created</th>
          <th data-key="updated">Updated</th>
        </tr>
      </thead>
      </tbody> 
    </table>

    <script>
      let accountFixture = {"username": "Tweek", "password": "dragon4ever", "cdkey": "efgh5678", "role": 3, "approved": 1, "banned": 0, "created": "23/11/2017","updated": "29/11/2017"};
      sessionStorage.setItem('account', JSON.stringify(accountFixture));

      window.addEventListener('load', () => {
        let form = document.querySelector('#login');
        let user = document.querySelector("#login input[name='user']");
        let pw = document.querySelector("#login input[name='pw']");

        let account = JSON.parse(sessionStorage.getItem('account'));
        user.value = account.username;
        pw.value = account.password;

        fillOneRowTable(document.querySelector("#accountInfo"), account);

        let characterFixture = [{"id":1,"accountId":"Tweek","name":"Siobhan Faulkner","exp":10000,"area":"Hlammach Docks","created":"23/11/2017","updated":"29/11/2017"},{"id":2,"accountId":"Aez","name":"Alrunden Peralt","exp":12000,"area":"Dreyen Inn","created":"26/6/2017","updated":"29/11/2017"},{"id":3,"accountId":null,"name":"Arthen Relindar","exp":20000,"area":"Relindar Green","created":null,"updated":null},{"id":4,"accountId":"XxDrizzitxX","name":"Ji'Lin Thri'quen","exp":1050,"area":"Dreyen Inn","created":"29/11/2017","updated":"29/11/2017"}];
        fillTableFromHeader(document.querySelector("#characters"), characterFixture);

        form.addEventListener('submit', event => {
          event.preventDefault();
          let formData = new FormData(event.srcElement);
          for (let input of formData.entries()) {
            console.log(`${input[0]}: ${input[1]}`)
          }
        })
      });
    </script>

  </body>
</html>